apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: backstage-secrets
  namespace: backstage
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: gcpsm-cluster-store
    kind: ClusterSecretStore
  target:
    name: backstage-secrets
    creationPolicy: Owner
  data:
  - secretKey: POSTGRES_PASSWORD
    remoteRef:
      key: backstage-db-password
  - secretKey: GITHUB_TOKEN
    remoteRef:
      key: github-token
  - secretKey: GITHUB_CLIENT_ID
    remoteRef:
      key: github-oauth-client-id
  - secretKey: GITHUB_CLIENT_SECRET
    remoteRef:
      key: github-oauth-client-secret
  - secretKey: ARGOCD_USERNAME
    remoteRef:
      key: argocd-username
  - secretKey: ARGOCD_PASSWORD
    remoteRef:
      key: argocd-password
  - secretKey: ARGOCD_AUTH_TOKEN
    remoteRef:
      key: argocd-auth-token
  - secretKey: AZURE_TOKEN
    remoteRef:
      key: azure-devops-token
  - secretKey: KUBERNETES_SERVICE_ACCOUNT_TOKEN
    remoteRef:
      key: backstage-k8s-token
  # Jenkins Integration
  - secretKey: JENKINS_USERNAME
    remoteRef:
      key: jenkins-username
  - secretKey: JENKINS_API_KEY
    remoteRef:
      key: jenkins-api-key
  # Security Tools
  - secretKey: SNYK_ORG
    remoteRef:
      key: snyk-org
  - secretKey: SONARQUBE_API_KEY
    remoteRef:
      key: sonarqube-api-key
  # Monitoring Tools
  - secretKey: DATADOG_API_KEY
    remoteRef:
      key: datadog-api-key
  - secretKey: DATADOG_APP_KEY
    remoteRef:
      key: datadog-app-key
  - secretKey: NEW_RELIC_API_KEY
    remoteRef:
      key: new-relic-api-key
  # Error Tracking
  - secretKey: ROLLBAR_ORGANIZATION
    remoteRef:
      key: rollbar-organization
  - secretKey: ROLLBAR_ACCOUNT_TOKEN
    remoteRef:
      key: rollbar-account-token
  - secretKey: SENTRY_ORGANIZATION
    remoteRef:
      key: sentry-organization
  - secretKey: SENTRY_TOKEN
    remoteRef:
      key: sentry-token
  # Communication
  - secretKey: SLACK_TOKEN
    remoteRef:
      key: slack-token
  # Project Management
  - secretKey: JIRA_USER_EMAIL
    remoteRef:
      key: jira-user-email
  - secretKey: JIRA_API_TOKEN
    remoteRef:
      key: jira-api-token
